# 1장 소프트웨어 아키텍처의 의미

[목차로](index.md)

## 1.1 무엇이 소프트웨어 아키텍처이고, 무엇이 아닌가?
- 소프트웨어 아키텍처의 정의
시스템의 소프트웨어 아키텍처란 시스템을 추론하는 데 필요한 구조의 집합으로, 시스템은 소프트웨어 요소와 이들 사이의 관계, 그리고 이들 요소와 관계의 속성으로 구성된다.
- 많은 아키텍처 결정이 초기에 이루어지지만, 모두가 그런 것은 아님

### 아키텍처는 소프트웨어 구조의 집합이다
- 구조란 단순히 관계로 서로 얽혀있는 요소들의 집합
- 아키텍처적인 구조의 세 가지 카테고리
  1. 모듈
    - 모듈이라고 부르는 구현단위로 시스템을 분할
    - 모듈에는 컴퓨팅 책임이 할당, 프로그래밍 팀의 작업을 할당하는 기반
    - 모듈 구조는 모듈 분할 구조, 클래스 다이어그램, 레이어로 나타남
    - 정적인 구조
  2. 컴포넌트-커넥터
    - 시스템의 기능을 수행하기 위해 런타임에 요소가 서로 상호작용하는 방식에 집중
    - 시스템이 서비스의 집합으로 구축된다고 가정
    - 서비스와 이들이 상호작용하는 인프라스트럭처, 그리고 이들 사이의 동기화 및 상호작용 관계가 다른 종류의 구조를 형성
    - 동적인 구조
  3. 할당
    - 소프트웨어 구조로부터 시스템의 구성, 개발, 설치, 실행 환경으로의 매핑을 서술
- 소프트웨어가 무수히 많은 구조로 구성되지만 이들 모두가 아키텍처적인 것은 아님
- 아키텍처적인 구조는 시스템과 시스템의 속성에 대해 추론 할 수 있게 함

### 아키텍처는 추상화다
- 시스템에 관해 추론하는 데 유용하지 않은 요소에 대한 특정한 정보를 아키텍처가 생략
- 추상화는 시스템의 복잡성을 길들이는 데 필수적

### 모든 소프트웨어 시스템에는 소프트웨어 아키텍처가 있다
- 모든 시스템은 요소와 이들 사이의 관계로 구성되어 일정한 유형의 추론을 지원(가장 단순한 경우, 시스템은 그 자체가 하나의 요소)
- 모든 시스템이 아키텍처를 갖는다 하더라도 아키텍처가 누구에게나 알려지는 것은 아님(아키텍처와 아키텍처의 표현의 차이)
- 아키텍처는 서술서나 명세서와 독립적으로 존재하므로 아키텍처 문서가 중요함

### 아키텍처는 행위를 포함한다
- 요소의 행위가 다른 요소에 영향을 미치거나 전체로서 시스템에 영향을 미치는 정도라면 이 행위는 소프트웨어 아키텍처의 일부로서 검토되어야 하고, 문서화되어야만 함

### 모든 아키텍처가 좋은 아키텍처는 아니다.
- 아키텍처에 대한 정의는 시스템의 아키텍처가 좋고 나쁜 지와 상관이 없음
- 아키텍처 설계가 중요한 것은 시행착오를 거치면서 좋은 아키텍처가 나타나기를 기대하는 것을 원하지 않기 때문

## 1.2 아키텍처 구조와 뷰
- 시스템은 복잡해서 한 번에 모든 것을 이해할 수 없으므로, 한 번에 소프트웨어 시스템의 구조 중 하나에 관심을 갖음
- 아키텍처의 어떤 뷰를 다루고 있는지 명확하게 해야 함.

### 구조와 뷰
- 구조(structure)와 뷰(view)
  - 뷰는 아키텍처 요소들의 밀접한 집합의 표현으로, 시스템 이해당사자가 작성하고 읽는다. 요소들의 집합과 이들 사이의 관계의 표현으로 구성된다.
  - 구조는 요소 자체의 집합으로, 소프트웨어나 하드웨어 안에 존재한다.
- 뷰는 구조의 표현이다.
- 아키텍트는 구조를 설계하고, 이들 구조의 뷰를 문서화한다.

### 구조의 세 가지 유형
1. 모듈 구조
  - 구축되거나 획득되어야 하는 코드 또는 데이터 단위의 집합
  - 시스템이 구조화되는 방법에 대한 결정을 구체화
  - 요소는 일정한 모듈
  - 모듈 = 시스템의 정적인 방식을 표현, 기능적인 책임 영역에 할당
  - 모듈 구조가 전달하는 정보
    - 각 모듈에 할당된 중요한 기능적인 책임은 무엇인가?
    - 어떤 다른 소프트웨어 요소가 사용이 허용된 모듈인가?
    - 어떤 다른 소프트웨어를 실제로 사용하고 의존하는가?
    - 어떤 모듈이 일반화 또는 특수화(즉, 상속성) 관계로 다른 모듈과 관련되는가?
  - 모듈 뷰는 변경용이성을 추론하기 좋음
2. 컴포넌트-커넥터 구조
  - 시스템이 런타임 행위(컴포넌트)와 상호작용(커넥터)을갖는 요소의 집합으로 구조화되는 방법에 대한 결정을 구체화
  - 요소는 런타임 컴포넌트와 커넥터
  - 컴포넌트-커넥터 구조가 전달하는 정보
    - 주요 실행하는 컴포넌트는 무엇이며, 런타임에 이들이 어떻게 상호작용하는가?
    - 주요 공유 데이터 저장소는 무엇인가?
    - 시스템의 어떤 부분이 복제되는가?
    - 시스템에서 어떻게 데이터가 이동되는가?
    - 시스템의 어떤 부분이 병렬로 실행되는가?
    - 시스템의 구조가 실행 시에 변경될 수 있는가? 그렇다면 어떻게 그렇게 하는가?
  - 컴포넌트-커넥터 뷰는 성능, 보안, 가용성을 추론하기 좋음.
3. 할당 구조
  - 시스템이 자신의 환경 안에 있는 비소프트웨어 구조와 관련되는 방법에 대한 결정을 구체화
  - 소프트웨어 요소와 소프트웨어가 생성되고 실행되는 외부 환경에 있는 요소들 사이의 관계
  - 할당 구조가 전달하는 정보
    - 각 소프트웨어 요소가 어떤 프로세서 상에서 실행되는가?
    - 개발, 테스팅, 시스템 구축 동안에 각 요소가 어떤 디렉토리 또는 파일에 저장되는가?
    - 각 소프트웨어 요소가 개발팀에 어떻게 배정되는가?

### 구조는 통찰력을 제공한다
- 각 구조는 아키텍트에게
  - 적절한 품질 속성에 대한 추론을 위한 관점을 제시
  - 설계에 대한 서로 다른 통찰력을 제공
  - 엔지니어링 활용점(leverage point)을 제시
- 시나리오는 다른 구조와의 연결뿐만 아니라 해당 구조를 조사하는 데 유용

### 몇 가지 유용한 모듈 구조
- 분할 구조(decomposition structure)
  - 서브 모듈이다(is-a-submodule-of) 관계로 서로 연관되는 모듈
  - 모듈이 이해될 수 있을 때까지 반복해서 더 작은 모듈로 분할
  - 모듈은 일반적인 설계 시작점을 표현
  - 아키텍트는 소프트웨어의 단위가 무엇을 해야 하는지 열거, 계속적인 설계와 궁극적인 구현을 위해 각 항목을 모듈에 할당
  - 변경을 지역화하는 것을 보장 -> 시스템의 변경용이성을 결정
  - 보통 문서 구조와 프로젝트 통합 및 테스트 계획을 포함하는 개발 프로젝트의 조직에 대한 기반으로서 사용
- 사용 구조(uses structre)
  - 단위는 의존성의 형태인 특별한 사용하다(use) 관계로 연관
  - 시스템의 서브집합을 쉴게 생성할 수 있어서 점증적 개발을 가능하게 함
- 레이어 구조(layer structre)
  - 레이어는 관리되는 인터페이스를 통해서 응집력 있는 서비스 집합을 제공하는 추상적인 가상 머신
  - 엄격한 레이어 시스템에서는 레이어가 바로 밑에 있는 레이어만 사용
  - 시스템이 호환성, 해당 컴퓨팅 플랫폼을 변경하는 능력을 불어넣음
- 클래스 구조(class structure)
  - 관계는 상속하다(inherit from) 또는 인스턴스다(is an instance of)
  - 유사한 행위나 기능들과 파라미터화된 차이점에 대한 추론을 지원
  - 객체지향 분석과 설계 프로세스를 사용한 프로젝트의 문서는 일반적으로 이 구조를 사용
- 데이터 모델(data model)
  - 데이터 엔티티(entity)와 관계(relationship)라는 용어로 정적인 정보 구조를 서술

### 몇 가지 유용한 C&C 구조
- 서비스 구조
- 동시성 구조

### 몇 가지 유용한 할당 구조
- 배포 구조
- 구현 구조
- 작업 배정 구조

### 구조 사이의 관계
- 각 구조는 시스템에 대한 다른 관점과 설계 기회를 제공
- 각 구조의 요소가 다른 구조 요소와 관련될 수 있으며, 이들 관계에 대한 근거가 필요
- 일반적으로 구조 사이의 매핑은 다대다
- 지배적인 구조(일반적으로 모듈 분할 구조)를 기초로 하여 다른 구조를 고안

### 적을수록 좋다
- 모든 시스템이 많은 아키텍처 구조를 검토해야 하는 것은 아님
- 구조를 설계하고 문서화하는 것이 이러한 투자에 대한 긍정적인 결과(개발 또는 유지보수 비용의 감소)를 가져오는 경우에만 그렇게 하는 것이 좋음

### 구조 선택
- 다양한 구조 중에서 어느 것이 시스템의 가장 중요한 품질 속성에 대한 통찰력과 활용성을 제공하는지 살펴봄
- 이들 속성을 제공하는 데 있어 가장 좋은 역할을 하는 구조를 선택

## 1.3 아키텍처 패턴
- 아키텍처 패턴 : 아키텍처 요소는 특정한 문제를 해결하는 방식으로 구성되는데 여러 다른 도메인에서 이러한 구성이 유용하다는 것이 발견되어 이것을 문서화하고 보급한 것
- 아키텍처 패턴은 시스템이 직면한 문제를 해결하기 위한 패키지화된 전략을 제공
- 아키텍처 패턴은 요소의 타입과 문제를 해결하는 데 사용되는 이들의 상호작용 형식을 정확하게 서술
- 패턴은 사용하는 아키텍처 요소의 유형에 따라서 특징을 갖음
- 모듈 패턴
  - 레이어 패턴 : 소프트웨어 요소 사이에 사용한다 관계가 엄격하게 단방향적일 때 레이어 체계가 등장한다. 레이어는 관련된 기능성의 긴밀한 집합이다. 엄격한 레이어 구조에서 레이어는 바로 밑에 있는 레이어의 서비스만 사용한다. 실제로는 구조적인 제약을 완화시키는 이 패턴의 많은 변형이 나타난다. 레이어는 상위 레이어로부터 하위 레이어의 구현 상세를 감추는 추상화(가상 머신)로 설계되며, 이식성을 제공한다.
- 컴포넌트-커넥터 패턴
  - 공유 데이터, 레파지토리 패턴 : 이 패턴은 지속적인 데이터를 생성하고 저장하고 접근하는 컴포넌트와 커넥터로 구성된다. 레파지토리는 데이터베이스의 모습을 취하며, 커넥터는 SQL과 같은 데이터를 관리하는 데 사용되는 프로토콜이다.
  - 클라이언트-서버 패턴 : 컴포넌트는 클라이언트와 서버이고, 커넥터는 시스템의 작업을 수행하기 위해 서로가 공유하는 프로토콜과 메시지다.
- 할당 패턴
  - 다중 티어 패턴 : 이 패턴은 커뮤니케이션 매체로 연결된 구별된 하드웨어와 소프트웨어 서브집합 안에 시스템의 컴포넌트를 분산시키고 할당하는 방법을 서술한다. 이 패턴은 일반적인 배포 구조를 특수화한다.
  - 역량 센터와 플랫폼 : 소프트웨어 시스템의 작업 배정 구조를 특수화한 패턴이다. 역량 센터에서 기술이나 도메인 전문가가 위치한 사이트에 작업이 할당된다. 예를 들어 사용자 인터페이스 설계는 사용성 엔지니어링 전문가가 있는 사이트에서 수행된다. 플랫폼에서는 하나의 사이트가 소프트웨어 제품 라인의 재사용할 수 있는 핵심 자산을 개발하는 작업을 수행하도록 하며, 다른 사이트는 이러한 핵심 자산을 사용하여 애플리케이션을 개발하도록 한다.

## 1.4 좋은 아키텍처를 만드는 법
- 좋고 나쁜 아키텍처는 없음 -> 목적에 더 적합하거나 덜 적합한 아키텍처가 있음
- 프로세스 권고
  - 아키텍처는 한 명의 아키텍트 또는 기술 리럳가 있는 소규모 아키텍트 그룹의 작품이어야 한다.
  - 아키텍트는 계속적인 기반으로 잘 명세된 품질 속성 요구의 우선순위 목록 위에 아키텍처를 기초해야 한다.
  - 아키텍처는 뷰를 사용하여 문서화한다.
  - 아키텍처는 시스템의 중요한 품질 속성을 전달하는 능력으로 평가되어야 한다.
  - 문제를 초기에 발견하는 것 뿐 아니라, 모든 것을 한번에 통합하지 않도록 아키텍처가 점증적 구현에 도움을 주어야 한다.
- 구조적 권고
  - 아키텍처는 정보 감추기 및 관심의 분리 원칙에 따라 기능적인 책임이 배정된 잘 정의된 모듈로 특징지어야 한다.
  - 요구가 선행된 경우, 아키텍처 패턴과 전술을 사용하여 품질 속성을 달성할 수 있다.
  - 아키텍처는 특정한 버전의 상업용 제품이나 도구에 의존하지 않아야 한다.
  - 데이터를 만들어내는 모듈과 데이터를 소비하는 모듈을 구별해야 한다.
  - 모듈과 컴포넌트 사이의 1대1 대응을 기대하지 않는다.
  - 런타임에도 특정한 프로세서에 배정을 쉽게 변경할 수 있도록 모든 프로세스가 작성되어야 한다.
  - 아키텍처는 컴포넌트가 상호작용하는 방식이 소수가 되도록 특징지어야 한다.
  - 아키텍처는 특정한 리소스 다툼 영역의 집합을 포함해야하며, 이들에 대한 해결 방법이 명확하게 명세되고 유지되어야 한다.

## 1.5 정리
- 시스템의 소프트웨어 아키텍처란 시스템을 추론하는 데 필요한 구조의 집합으로, 시스템은 소프트웨어 요소와 이들 사이의 관계, 그리고 이들 요소와 관계의 속성으로 구성된다
- 구조는 요소들의 집합과 이들 사의와 관계
- 뷰는 아키텍처 요소들의 밀접한 집합의 표현으로, 시스템 이해당사자가 작성하고 읽는다. 뷰는 하나 이상의 구조의 표현이다.
- 세 가지 카테고리의 구조
  - 모듈 구조: 구축되거나 획득되어야 하는 코드 또는 데이터 단위의 집합으로 시스템이 구조화되는 방법을 보여준다.
  - 컴포넌트-커넥터 구조: 시스템이 런타임 행위(컴포넌트)와 상호작용(커넥터)을 갖는 요소의 집합으로 구조화되는 방법을 보여준다.
  - 할당 구조: 시스템이 자신의 환경 안에 있는 비소프트웨어 구조와 관련되는 방법을 보여준다.
- 구조는 아키텍처의 최우선 엔지니어링 활용점을 표현한다.
- 각 구조는 하나 이상의 품질 속성을 다룰 수 있는 힘을 가져온다.
- 이들은 아키텍처를 생성하기 위한 강력한 접근 방법을 표현한다.
- 엔지니어링 활용점으로 아키텍트가 선택한 구조는 아키텍처 문서화에 대한 기반으로서 선택할 수 있는 최우선 후보가 된다.
- 모든 시스템은 소프트웨어 아키텍처를 갖는다. 그러나 이 아키텍처는 문서화되거나 유포될 수도 있고, 그렇지 않을 수도 있다.
- 본질적으로 좋은 아키텍처나 나쁜 아키텍처와 같은 것은 없다. 아키텍처는 목적에 좀 더 부합하거나 덜 부합한다.
